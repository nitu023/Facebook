{"ast":null,"code":"var _jsxFileName = \"/home/nitu/Facebook/facebook/src/component/Story.js\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport { Link } from 'react-router-dom';\nimport Navbar from './Navbar';\nimport queryString from \"query-string\";\nimport Createstory from './Createstory';\nimport FriendStory from './friendStory';\n\nclass Story extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleInput = e => {\n      e.preventDefault();\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.componentDidMount = (page = 1) => {\n      axios.get(`http://127.0.0.1:5000/read_userStoryall?page=${page}`).then(res => {\n        console.log(res.data);\n        this.setState({\n          allstory1: res.data.data,\n          total_pages: res.data.total_pages\n        });\n      }).catch(err => alert(err));\n      axios.get(\"http://127.0.0.1:5000/get-user-token\", {\n        headers: {\n          Authorization: \"Bearer \" + this.state.tokenId,\n          'Content-Type': 'application/json'\n        }\n      }).then(response => {\n        console.log(response.data);\n        this.setState({\n          allDAta: response.data\n        });\n      }); // .catch((err) => alert(err))\n    };\n\n    this.Deleteblog = story_id => {\n      axios.delete('http://127.0.0.1:5000/delete-story/' + story_id, {\n        headers: {\n          user_id: this.state.allDAta.user_id\n        }\n      }).then(res => {\n        console.log(res.data);\n        this.props.history.push(`/Story/${this.state.user_id}`);\n        window.location.reload(false);\n      }).catch(error => alert(error));\n    };\n\n    this.pagination = pageNo => {\n      let updatePage = this.state.change_page;\n      updatePage.page = pageNo;\n      this.setState({\n        change_page: updatePage\n      }, () => {\n        this.props.history.push(`?${queryString.stringify(updatePage)}`);\n      });\n      this.componentDidMount(this.page = pageNo);\n    };\n\n    this.handlePageChange = (page, e) => {\n      this.setState({\n        currentPage: page\n      });\n    };\n\n    this.rowChange = e => {\n      e.preventDefault();\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.state = {\n      allstory1: [],\n      allDAta: [],\n      per_page: 0,\n      change_page: {\n        page: 1\n      },\n      total_pages: 0,\n      tokenId: window.localStorage.getItem(\"token\")\n    };\n  }\n\n  render() {\n    console.log(this.state.allstory1);\n    const pageNumbers = [];\n\n    for (let i = 1; i <= this.state.total_pages; i++) {\n      pageNumbers.push(i);\n    }\n\n    const renderPageNumbers = pageNumbers.map(number => {\n      return React.createElement(\"button\", {\n        className: \"btn btn-dark ml-2\",\n        onClick: () => this.pagination(number),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, number);\n    });\n    let all_story = this.state.allstory1.reverse().map(e => {\n      if (this.state.allDAta.user_id === e.user_id) {\n        return React.createElement(\"div\", {\n          class: \"card mb-3 w-50 offset-3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          class: \"card-body\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: `http://127.0.0.1:5000/${e.postImageLink}`,\n          style: {\n            width: \"50px\",\n            height: \"50px\"\n          },\n          className: \"ml-5 rounded-circle\",\n          alt: \"image\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }, \" name : \", e.first_name, \" \", e.last_name, \" \"), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }, \" story : \", e.story_content), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115\n          },\n          __self: this\n        }, \" \", e.created), React.createElement(\"img\", {\n          className: \"w-100\",\n          style: {\n            height: \"250px\"\n          },\n          src: `http://127.0.0.1:5000/${e.postImageLink1}`,\n          alt: \"post\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          class: \"card-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          class: \"card-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118\n          },\n          __self: this\n        }, React.createElement(\"small\", {\n          class: \"text-muted\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118\n          },\n          __self: this\n        }, \"Last updated 3 mins ago\")), React.createElement(Link, {\n          to: `/Updatestory/${e.story_id}`,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119\n          },\n          __self: this\n        }, \"Update story \")), React.createElement(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-danger ml-1\",\n          onClick: () => this.Deleteblog(e.story_id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          },\n          __self: this\n        }, \" Delete story \")));\n      } else {\n        return React.createElement(\"div\", {\n          class: \"card mb-3 w-50 offset-3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          class: \"card-body\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: `http://127.0.0.1:5000/${e.postImageLink}`,\n          style: {\n            width: \"50px\",\n            height: \"50px\"\n          },\n          className: \"ml-5 rounded-circle\",\n          alt: \"image\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130\n          },\n          __self: this\n        }, \" name: \", e.first_name, \"  \", e.last_name, \" \"), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131\n          },\n          __self: this\n        }, \" story : \", e.story_content), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132\n          },\n          __self: this\n        }, \" \", e.created), React.createElement(\"img\", {\n          className: \"w-100\",\n          style: {\n            height: \"250px\"\n          },\n          src: `http://127.0.0.1:5000/${e.postImageLink1}`,\n          alt: \"post\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          class: \"card-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          class: \"card-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135\n          },\n          __self: this\n        }, React.createElement(\"small\", {\n          class: \"text-muted\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135\n          },\n          __self: this\n        }, \"Last updated 3 mins ago\")), React.createElement(Link, {\n          to: `/Comment/${e.story_id}`,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary offset-3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }, \" Comment \"))));\n      }\n    });\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(Navbar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(Createstory, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    })), all_story, React.createElement(\"div\", {\n      className: \"offset-5 mt-3 mb-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, this.page > 1 ? React.createElement(\"li\", {\n      className: `btn btn-info`,\n      onClick: () => this.pagination(this.page - 1),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, \"Prev\")) : '', renderPageNumbers, this.page < this.state.total_pages ? React.createElement(\"li\", {\n      className: `btn btn-info`,\n      onClick: () => this.pagination(this.page + 1),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, \"Next\")) : '', this.page < this.state.total_pages + this.page ? React.createElement(\"li\", {\n      className: `btn btn-dark`,\n      onClick: () => this.pagination(this.state.total_pages),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, \"last\")) : ''));\n  }\n\n}\n\nexport default Story;","map":{"version":3,"sources":["/home/nitu/Facebook/facebook/src/component/Story.js"],"names":["React","axios","Link","Navbar","queryString","Createstory","FriendStory","Story","Component","constructor","props","handleInput","e","preventDefault","setState","target","name","value","componentDidMount","page","get","then","res","console","log","data","allstory1","total_pages","catch","err","alert","headers","Authorization","state","tokenId","response","allDAta","Deleteblog","story_id","delete","user_id","history","push","window","location","reload","error","pagination","pageNo","updatePage","change_page","stringify","handlePageChange","currentPage","rowChange","per_page","localStorage","getItem","render","pageNumbers","i","renderPageNumbers","map","number","all_story","reverse","postImageLink","width","height","first_name","last_name","story_content","created","postImageLink1"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport axios from \"axios\";\nimport { Link } from 'react-router-dom';\nimport Navbar from './Navbar';\nimport queryString from \"query-string\";\nimport Createstory from './Createstory';\nimport FriendStory from './friendStory'\n\nclass Story extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      allstory1: [],\n      allDAta: [],\n      per_page: 0,\n      change_page:\n      {\n        page: 1\n      },\n      total_pages: 0,\n      tokenId: window.localStorage.getItem(\"token\"),\n    }\n  }\n\n  handleInput = (e) => {\n    e.preventDefault()\n    this.setState({\n      [e.target.name]: e.target.value\n    })\n  }\n\n  componentDidMount = (page = 1) => {\n    axios.get(`http://127.0.0.1:5000/read_userStoryall?page=${page}`)\n      .then(res => {\n        console.log(res.data)\n        this.setState({\n          allstory1: res.data.data,\n          total_pages: res.data.total_pages\n        })\n      })\n      .catch((err) => alert(err))\n\n    axios.get(\"http://127.0.0.1:5000/get-user-token\", {\n      headers: {\n        Authorization: \"Bearer \" + this.state.tokenId,\n        'Content-Type': 'application/json'\n      }\n    })\n      .then(response => {\n        console.log(response.data)\n        this.setState({\n          allDAta: response.data\n        })\n      })\n    // .catch((err) => alert(err))\n  }\n\n  Deleteblog = (story_id) => {\n    axios.delete('http://127.0.0.1:5000/delete-story/' + story_id, {\n      headers: {\n        user_id: this.state.allDAta.user_id\n      }\n    })\n      .then((res) => {\n        console.log(res.data)\n        this.props.history.push(`/Story/${this.state.user_id}`)\n        window.location.reload(false)\n      })\n      .catch((error) => alert(error))\n  }\n  pagination = (pageNo) => {\n    let updatePage = this.state.change_page\n    updatePage.page = pageNo\n    this.setState(\n      {\n        change_page: updatePage\n      },\n      () => {\n        this.props.history.push(`?${queryString.stringify(updatePage)}`);\n      }\n    );\n    this.componentDidMount(this.page = pageNo);\n  };\n\n  handlePageChange = (page, e) => {\n    this.setState({\n      currentPage: page\n    });\n  };\n  rowChange = (e) => {\n    e.preventDefault()\n    this.setState({\n      [e.target.name]: e.target.value\n    })\n  }\n  render() {\n    console.log(this.state.allstory1)\n    const pageNumbers = [];\n    for (let i = 1; i <= this.state.total_pages; i++) {\n      pageNumbers.push(i);\n    }\n    const renderPageNumbers = pageNumbers.map(number => {\n      return (\n        <button className=\"btn btn-dark ml-2\" onClick={() => this.pagination(number)}>{number}</button>\n      );\n    });\n    let all_story = this.state.allstory1.reverse().map((e) => {\n      if (this.state.allDAta.user_id === e.user_id) {\n        return (\n          <div class=\"card mb-3 w-50 offset-3\">\n            <div class=\"card-body\">\n              <img src={`http://127.0.0.1:5000/${e.postImageLink}`} style={{ width: \"50px\", height: \"50px\" }} className=\"ml-5 rounded-circle\" alt=\"image\"></img>\n              <p > name : {e.first_name} {e.last_name} </p>\n              <p > story : {e.story_content}</p>\n              <p> {e.created}</p>\n              <img className=\"w-100\" style={{ height: \"250px\" }} src={`http://127.0.0.1:5000/${e.postImageLink1}`} alt=\"post\"></img>\n              <p class=\"card-text\"></p>\n              <p class=\"card-text\"><small class=\"text-muted\">Last updated 3 mins ago</small></p>\n              <Link to={`/Updatestory/${e.story_id}`}><button type=\"submit\" className=\"btn btn-primary\">Update story </button></Link>\n              <button type=\"submit\" className=\"btn btn-danger ml-1\" onClick={() => this.Deleteblog(e.story_id)}> Delete story </button>\n            </div>\n          </div>\n        )\n      }\n      else {\n        return (\n          <div class=\"card mb-3 w-50 offset-3\">\n            <div class=\"card-body\">\n              <img src={`http://127.0.0.1:5000/${e.postImageLink}`} style={{ width: \"50px\", height: \"50px\" }} className=\"ml-5 rounded-circle\" alt=\"image\"></img>\n              <p > name: {e.first_name}  {e.last_name} </p>\n              <p > story : {e.story_content}</p>\n              <p> {e.created}</p>\n              <img className=\"w-100\" style={{ height: \"250px\" }} src={`http://127.0.0.1:5000/${e.postImageLink1}`} alt=\"post\"></img>\n              <p class=\"card-text\"></p>\n              <p class=\"card-text\"><small class=\"text-muted\">Last updated 3 mins ago</small></p>\n              <Link to={`/Comment/${e.story_id}`}><button type=\"submit\" className=\"btn btn-primary offset-3\"> Comment </button></Link>\n            </div>\n          </div>\n        )\n      }\n    })\n    return (\n      <div>\n        <Navbar />\n        <div className=\"mb-3\">\n          <Createstory />\n        </div>\n        {all_story}\n        <div className=\"offset-5 mt-3 mb-5\">\n          {this.page > 1 ? <li className={`btn btn-info`} onClick={() => this.pagination(this.page - 1)}><a href=\"#\">Prev</a></li> : ''}\n          {renderPageNumbers}\n          {this.page < this.state.total_pages ? <li className={`btn btn-info`} onClick={() => this.pagination(this.page + 1)}><a href=\"#\">Next</a></li> : ''}\n          {this.page < this.state.total_pages + this.page ? <li className={`btn btn-dark`} onClick={() => this.pagination(this.state.total_pages)}><a href=\"#\">last</a></li> : ''}\n        </div>\n        {/* <FriendStory /> */}\n      </div>\n    )\n  }\n\n}\n\nexport default Story\n"]},"metadata":{},"sourceType":"module"}