{"ast":null,"code":"var _jsxFileName = \"/home/nitu/Facebook/facebook/src/component/Story.js\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport { Link } from 'react-router-dom';\nimport Navbar from './Navbar';\nimport queryString from \"query-string\";\nimport Createstory from './Createstory';\nimport Pagination from \"react-paginating\";\n\nclass Story extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleInput = e => {\n      e.preventDefault();\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.componentDidMount = (page = 1) => {\n      axios.get(`http://127.0.0.1:5000/read_userStoryall?page=${page}`, {\n        headers: {\n          per_page: this.state.per_page\n        }\n      }).then(res => {\n        console.log(res.data);\n        this.setState({\n          allstory: res.data.data,\n          total_pages: res.data.total_pages\n        }); // console.log(res.data[0].comment)\n        // alert(\"helllo\")\n      }).catch(err => alert(err));\n      axios.get(\"http://127.0.0.1:5000/get-user-token\", {\n        headers: {\n          Authorization: \"Bearer \" + this.state.tokenId,\n          'Content-Type': 'application/json'\n        }\n      }).then(response => {\n        console.log(response.data);\n        this.setState({\n          allDAta: response.data\n        });\n      }); // .catch((err) => alert(err))\n    };\n\n    this.Deleteblog = story_id => {\n      axios.delete('http://127.0.0.1:5000/delete-story/' + story_id, {\n        headers: {\n          user_id: this.state.allDAta.user_id\n        }\n      }).then(res => {\n        console.log(res.data);\n        this.props.history.push(`/Story/${this.state.user_id}`);\n        window.location.reload(false);\n      }).catch(error => alert(error));\n    };\n\n    this.pagination = pageNo => {\n      let updatePage = this.state.change_page;\n      updatePage.page = pageNo;\n      this.setState({\n        change_page: updatePage\n      }, () => {\n        this.props.history.push(`?${queryString.stringify(updatePage)}`);\n      });\n      this.componentDidMount(this.page = pageNo);\n    };\n\n    this.handlePageChange = (page, e) => {\n      this.setState({\n        currentPage: page\n      });\n    };\n\n    this.rowChange = e => {\n      e.preventDefault();\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.state = {\n      allstory: [],\n      allDAta: [],\n      Comments_all: [],\n      // per_page: 0,\n      // change_page: \n      // {\n      //  page: 1\n      //     },\n      // total_page: 0,\n      tokenId: window.localStorage.getItem(\"token\"),\n      currentPage: 1,\n      // allData:[],\n      per_page: '',\n      total_users: \"\"\n    };\n  }\n\n  render() {\n    console.log(this.state.total_users);\n    const per_page = this.state.per_page;\n    const pageCount = 3; // How many button you want\n\n    let currentPage = this.state.currentPage;\n    let totalLength = this.state.allstory.length;\n    let start = (currentPage - 1) * Number(per_page);\n    let end = start + Number(per_page);\n    let slicedData = this.state.allstory.slice(start, end);\n    let all_blog = slicedData.reverse().map(e => {\n      if (this.state.allDAta.user_id === e.user_id) {\n        return React.createElement(\"div\", {\n          class: \"card mb-3 w-50 offset-3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          class: \"card-body\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: `http://127.0.0.1:5000/${e.postImageLink}`,\n          style: {\n            width: \"50px\",\n            height: \"50px\"\n          },\n          className: \"ml-5 rounded-circle\",\n          alt: \"image\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123\n          },\n          __self: this\n        }, \" name : \", e.first_name, \" \", e.last_name, \" \"), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124\n          },\n          __self: this\n        }, \" story : \", e.story_content), React.createElement(\"img\", {\n          className: \"w-100\",\n          style: {\n            height: \"250px\"\n          },\n          src: `http://127.0.0.1:5000/${e.postImageLink1}`,\n          alt: \"post\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          class: \"card-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          class: \"card-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        }, React.createElement(\"small\", {\n          class: \"text-muted\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        }, \"Last updated 3 mins ago\")), React.createElement(Link, {\n          to: `/Updatestory/${e.story_id}`,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128\n          },\n          __self: this\n        }, \"Update story \")), React.createElement(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-danger ml-1\",\n          onClick: () => this.Deleteblog(e.story_id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129\n          },\n          __self: this\n        }, \" Delete story \")));\n      } else {\n        return React.createElement(\"div\", {\n          class: \"card mb-3 w-50 offset-4\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          class: \"card-body\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: `http://127.0.0.1:5000/${e.postImageLink}`,\n          style: {\n            width: \"50px\",\n            height: \"50px\"\n          },\n          className: \"ml-5 rounded-circle\",\n          alt: \"image\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        }, \" name: \", e.first_name, \"  \", e.last_name, \" \"), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143\n          },\n          __self: this\n        }, \" story : \", e.story_content), React.createElement(\"img\", {\n          className: \"w-100\",\n          style: {\n            height: \"250px\"\n          },\n          src: `http://127.0.0.1:5000/${e.postImageLink1}`,\n          alt: \"post\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          class: \"card-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          class: \"card-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146\n          },\n          __self: this\n        }, React.createElement(\"small\", {\n          class: \"text-muted\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146\n          },\n          __self: this\n        }, \"Last updated 3 mins ago\")), React.createElement(Link, {\n          to: `/Comment/${e.story_id}`,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary offset-3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147\n          },\n          __self: this\n        }, \" Comment \"))));\n      }\n    });\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(Navbar, {\n      props: this.props,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }), React.createElement(Pagination, {\n      total: totalLength,\n      limit: per_page,\n      pageCount: pageCount,\n      currentPage: currentPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, ({\n      pages,\n      currentPage,\n      hasNextPage,\n      hasPreviousPage,\n      previousPage,\n      nextPage,\n      totalPages,\n      getPageItemProps\n    }) => React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(\"button\", Object.assign({\n      className: \"btn btn-info\"\n    }, getPageItemProps({\n      pageValue: 1,\n      onPageChange: this.handlePageChange\n    }), {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }), \"first\"), hasPreviousPage && React.createElement(\"button\", Object.assign({\n      className: \"btn btn-info\"\n    }, getPageItemProps({\n      pageValue: previousPage,\n      onPageChange: this.handlePageChange\n    }), {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }), \"<\"), pages.map(page => {\n      let activePage = null;\n\n      if (currentPage === page) {\n        activePage = {\n          backgroundColor: \"blue\"\n        };\n      }\n\n      return React.createElement(\"button\", Object.assign({\n        className: \"btn btn-primary\"\n      }, getPageItemProps({\n        pageValue: page,\n        key: page,\n        style: activePage,\n        onPageChange: this.handlePageChange\n      }), {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }), page);\n    }), hasNextPage && React.createElement(\"button\", Object.assign({\n      className: \"btn btn-info\"\n    }, getPageItemProps({\n      pageValue: nextPage,\n      onPageChange: this.handlePageChange\n    }), {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }), \">\"), React.createElement(\"button\", Object.assign({\n      className: \"btn btn-info\"\n    }, getPageItemProps({\n      pageValue: totalPages,\n      onPageChange: this.handlePageChange\n    }), {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }), \"last\"))), React.createElement(\"div\", {\n      className: \"mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }, React.createElement(Createstory, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    })), all_blog, React.createElement(\"div\", {\n      className: \"offset-5 mt-3 mb-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }), React.createElement(\"select\", {\n      class: \"custom-select w-25\",\n      id: \"inputGroupSelect01\",\n      name: \"per_page\",\n      onChange: this.handleInput,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      selected: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }, \"Choose...\"), React.createElement(\"option\", {\n      value: \"5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, \"5\"), React.createElement(\"option\", {\n      value: \"10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, \"10\"), React.createElement(\"option\", {\n      value: \"15\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, \"15\")));\n  }\n\n}\n\nexport default Story;","map":{"version":3,"sources":["/home/nitu/Facebook/facebook/src/component/Story.js"],"names":["React","axios","Link","Navbar","queryString","Createstory","Pagination","Story","Component","constructor","props","handleInput","e","preventDefault","setState","target","name","value","componentDidMount","page","get","headers","per_page","state","then","res","console","log","data","allstory","total_pages","catch","err","alert","Authorization","tokenId","response","allDAta","Deleteblog","story_id","delete","user_id","history","push","window","location","reload","error","pagination","pageNo","updatePage","change_page","stringify","handlePageChange","currentPage","rowChange","Comments_all","localStorage","getItem","total_users","render","pageCount","totalLength","length","start","Number","end","slicedData","slice","all_blog","reverse","map","postImageLink","width","height","first_name","last_name","story_content","postImageLink1","pages","hasNextPage","hasPreviousPage","previousPage","nextPage","totalPages","getPageItemProps","pageValue","onPageChange","activePage","backgroundColor","key","style"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport axios from \"axios\";\nimport { Link } from 'react-router-dom';\nimport Navbar from './Navbar';\nimport queryString from \"query-string\";\nimport Createstory from './Createstory';\nimport Pagination from \"react-paginating\";\n\n\nclass Story extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            allstory: [],\n            allDAta :[],\n            Comments_all: [],\n            // per_page: 0,\n            // change_page: \n            // {\n\t\t\t//  page: 1\n\t        //     },\n            // total_page: 0,\n            tokenId: window.localStorage.getItem(\"token\"),\n            currentPage: 1,\n            // allData:[],\n            per_page: '',\n            total_users:\"\"\n\n        }\n\n    }\n    handleInput =(e)=>{\n        e.preventDefault()\n        this.setState({\n         [e.target.name]:e.target.value\n        })\n      }\n    componentDidMount = (page = 1) => {\n        axios.get(`http://127.0.0.1:5000/read_userStoryall?page=${page}`,{\n      headers:{\n        per_page:this.state.per_page\n      }\n    })\n            .then(res => {\n              console.log(res.data)\n                this.setState({\n                    allstory: res.data.data,\n                    total_pages: res.data.total_pages\n                })\n                // console.log(res.data[0].comment)\n                // alert(\"helllo\")\n            })\n            .catch((err) => alert(err))\n\n        axios.get(\"http://127.0.0.1:5000/get-user-token\", {\n            headers: {\n                Authorization: \"Bearer \" + this.state.tokenId,\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(response => {\n                console.log(response.data)\n                this.setState({\n                  allDAta : response.data\n                })\n            })\n            // .catch((err) => alert(err))\n    }\n    Deleteblog = (story_id) => {\n        axios.delete('http://127.0.0.1:5000/delete-story/' + story_id, {\n            headers: {\n                user_id: this.state.allDAta.user_id\n            }\n        })\n            .then((res) => {\n                console.log(res.data)\n                this.props.history.push(`/Story/${this.state.user_id}`)\n                window.location.reload(false)\n            })\n            .catch((error) => alert(error))\n    }\n    pagination = (pageNo) => {\n\t\tlet updatePage = this.state.change_page\n\t\tupdatePage.page = pageNo\n\t\tthis.setState(\n\t\t\t{\n\t\t\t\tchange_page: updatePage\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tthis.props.history.push(`?${queryString.stringify(updatePage)}`);\n\t\t\t}\n        );\n\t\tthis.componentDidMount(this.page = pageNo);\n\t};\n\n    handlePageChange = (page, e) => {\n        this.setState({\n          currentPage: page\n        });\n      };\n      rowChange = (e) => {\n        e.preventDefault()\n        this.setState({\n            [e.target.name]: e.target.value\n        })\n    }\n    render() {\n        console.log(this.state.total_users)\n        const per_page = this.state.per_page\n        const pageCount = 3  // How many button you want\n        let currentPage = this.state.currentPage\n        let totalLength = this.state.allstory.length\n        let start = (currentPage-1)*Number(per_page)\n        let end = start + Number(per_page)\n        let slicedData = this.state.allstory.slice(start,end)\n\n        let all_blog = slicedData.reverse().map((e) => {\n            if (this.state.allDAta.user_id === e.user_id) {\n                return ( \n                  <div class=\"card mb-3 w-50 offset-3\">\n                  <div class=\"card-body\">\n                  <img src={`http://127.0.0.1:5000/${e.postImageLink}`} style={{ width: \"50px\", height: \"50px\" }} className=\"ml-5 rounded-circle\" alt = \"image\"></img>\n                   <p > name : {e.first_name} {e.last_name} </p>\n                   <p > story : {e.story_content}</p>\n                   <img  className =\"w-100\" style={{ height: \"250px\" }} src={`http://127.0.0.1:5000/${e.postImageLink1}`} alt = \"post\"></img>\n                    <p class=\"card-text\"></p>\n                    <p class=\"card-text\"><small class=\"text-muted\">Last updated 3 mins ago</small></p>\n                    <Link to={`/Updatestory/${e.story_id}`}><button type=\"submit\" className=\"btn btn-primary\">Update story </button></Link>\n                    <button type=\"submit\" className=\"btn btn-danger ml-1\" onClick={() => this.Deleteblog(e.story_id)}> Delete story </button>\n                    </div>\n                 \n                  \n                </div>\n                    \n                )\n            }\n            else {\n                return (\n                  <div class=\"card mb-3 w-50 offset-4\">\n                  <div class=\"card-body\">\n                  <img src={`http://127.0.0.1:5000/${e.postImageLink}`} style={{ width: \"50px\", height: \"50px\" }} className=\"ml-5 rounded-circle\" alt = \"image\"></img>\n                   <p > name: {e.first_name}  {e.last_name} </p>\n                   <p > story : {e.story_content}</p>\n                   <img  className =\"w-100\" style={{ height: \"250px\" }} src={`http://127.0.0.1:5000/${e.postImageLink1}`} alt = \"post\"></img>\n                    <p class=\"card-text\"></p>\n                    <p class=\"card-text\"><small class=\"text-muted\">Last updated 3 mins ago</small></p>\n                    <Link to={`/Comment/${e.story_id}`}><button type=\"submit\" className=\"btn btn-primary offset-3\"> Comment </button></Link>\n\n                    </div>\n                 \n                  \n                </div>\n                )\n\n            }\n        })\n        return (\n            <div>\n                <Navbar props={this.props} />\n                <Pagination\n          total={totalLength}\n          limit={per_page}\n          pageCount={pageCount}\n          currentPage={currentPage}\n        >\n          {({\n            pages,\n            currentPage,\n            hasNextPage,\n            hasPreviousPage,\n            previousPage,\n            nextPage,\n            totalPages,\n            getPageItemProps\n          }) => (\n            <div>\n              <button className=\"btn btn-info\"\n                {...getPageItemProps({\n                  pageValue: 1,\n                  onPageChange: this.handlePageChange\n                })}\n              >\n                first\n              </button>\n\n              {hasPreviousPage && (\n                <button className=\"btn btn-info\"\n                  {...getPageItemProps({\n                    pageValue: previousPage,\n                    onPageChange: this.handlePageChange\n                  })}\n                >\n                  {\"<\"}\n                </button>\n              )}\n\n              {pages.map(page => {\n                let activePage = null;\n                if (currentPage === page) {\n                  activePage = { backgroundColor: \"blue\" };\n                }\n                return (\n                  <button className=\"btn btn-primary\"\n                    {...getPageItemProps({\n                      pageValue: page,\n                      key: page,\n                      style: activePage,\n                      onPageChange: this.handlePageChange\n                    })}\n                  >\n                    {page}\n                  </button>\n                );\n              })}\n\n              {hasNextPage && (\n                <button className=\"btn btn-info\"\n                  {...getPageItemProps({\n                    pageValue: nextPage,\n                    onPageChange: this.handlePageChange\n                  })}\n                >\n                  {\">\"}\n                </button>\n              )}\n\n              <button className=\"btn btn-info\"\n                {...getPageItemProps({\n                  pageValue: totalPages,\n                  onPageChange: this.handlePageChange\n                })}\n              >\n                last\n              </button>\n            </div>\n          )}\n        </Pagination>\n                <div className = \"mb-3\">\n                <Createstory />\n                </div>\n                {all_blog}\n                <div className=\"offset-5 mt-3 mb-5\">\n                    {/* {renderPageNumbers} */}\n                    \n                </div>\n                <select class=\"custom-select w-25\" id=\"inputGroupSelect01\" name=\"per_page\" onChange ={this.handleInput}>\n                <option selected>Choose...</option>\n                <option value=\"5\">5</option>\n                <option value=\"10\">10</option>\n                <option value=\"15\">15</option>\n              </select>\n            </div>\n        )\n    }\n\n}\n\nexport default Story\n"]},"metadata":{},"sourceType":"module"}