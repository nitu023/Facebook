{"ast":null,"code":"var _jsxFileName = \"/home/nitu/Facebook/facebook/src/component/Story.js\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport { Link } from 'react-router-dom';\nimport Navbar from './Navbar';\nimport queryString from \"query-string\";\nimport Createstory from './Createstory';\n\nclass Story extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleInput = e => {\n      e.preventDefault();\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.componentDidMount = (page = 1) => {\n      axios.get(`http://127.0.0.1:5000/read_userStoryall?page=` + this.state.page, {\n        per_page: this.state.per_page\n      }).then(res => {\n        console.log(res.data);\n        this.setState({\n          allstory1: res.data.data,\n          total_pages: res.data.total_pages\n        });\n      }).catch(err => alert(err));\n      axios.get(\"http://127.0.0.1:5000/get-user-token\", {\n        headers: {\n          Authorization: \"Bearer \" + this.state.tokenId,\n          'Content-Type': 'application/json'\n        }\n      }).then(response => {\n        console.log(response.data);\n        this.setState({\n          allDAta: response.data\n        });\n      }); // .catch((err) => alert(err))\n    };\n\n    this.handleInput = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n      console.log(this.state);\n    };\n\n    this.onSubmit = e => {\n      e.preventDefault();\n      axios.post(`http://127.0.0.1:5000/read_userStoryall?page=` + this.state.page, {\n        per_page: this.state.per_page\n      }).then(res => {\n        console.log(res.data);\n        this.setState({\n          alldata: res.data.data,\n          total_pages: res.data.total_pages\n        }); // console.log(this.state.allvalue)\n      }).catch(err => alert(err));\n    };\n\n    this.Deleteblog = story_id => {\n      axios.delete('http://127.0.0.1:5000/delete-story/' + story_id, {\n        headers: {\n          user_id: this.state.allDAta.user_id\n        }\n      }).then(res => {\n        console.log(res.data);\n        this.props.history.push(`/Story/${this.state.user_id}`);\n        window.location.reload(false);\n      }).catch(error => alert(error));\n    };\n\n    this.pagination = pageNo => {\n      let updatePage = this.state.change_page;\n      updatePage.page = pageNo;\n      this.setState({\n        change_page: updatePage\n      }, () => {\n        this.props.history.push(`?${queryString.stringify(updatePage)}`);\n      });\n      this.componentDidMount(this.page = pageNo);\n    };\n\n    this.handlePageChange = (page, e) => {\n      this.setState({\n        currentPage: page\n      });\n    };\n\n    this.rowChange = e => {\n      e.preventDefault();\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.state = {\n      allstory1: [],\n      allDAta: [],\n      per_page: '',\n      change_page: {\n        page: 1\n      },\n      total_pages: 0,\n      tokenId: window.localStorage.getItem(\"token\")\n    };\n  }\n\n  render() {\n    console.log(this.state.allstory1);\n    const pageNumbers = [];\n\n    for (let i = 1; i <= this.state.total_pages; i++) {\n      pageNumbers.push(i);\n    }\n\n    const renderPageNumbers = pageNumbers.map(number => {\n      return React.createElement(\"button\", {\n        className: \"btn btn-dark ml-2\",\n        onClick: () => this.pagination(number),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, number);\n    });\n    let all_story = this.state.allstory1.reverse().map(e => {\n      if (this.state.allDAta.user_id === e.user_id) {\n        return React.createElement(\"div\", {\n          class: \"card mb-3 w-50 offset-3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          class: \"card-body\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: `http://127.0.0.1:5000/${e.postImageLink}`,\n          style: {\n            width: \"50px\",\n            height: \"50px\"\n          },\n          className: \"ml-5 rounded-circle\",\n          alt: \"image\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }, \" name : \", e.first_name, \" \", e.last_name, \" \"), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        }, \" story : \", e.story_content), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        }, \" \", e.created), React.createElement(\"img\", {\n          className: \"w-100\",\n          style: {\n            height: \"250px\"\n          },\n          src: `http://127.0.0.1:5000/${e.postImageLink1}`,\n          alt: \"post\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          class: \"card-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          class: \"card-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141\n          },\n          __self: this\n        }, React.createElement(\"small\", {\n          class: \"text-muted\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141\n          },\n          __self: this\n        }, \"Last updated 3 mins ago\")), React.createElement(Link, {\n          to: `/Updatestory/${e.story_id}`,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        }, \"Update story \")), React.createElement(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-danger ml-1\",\n          onClick: () => this.Deleteblog(e.story_id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143\n          },\n          __self: this\n        }, \" Delete story \")));\n      } else {\n        return React.createElement(\"div\", {\n          class: \"card mb-3 w-50 offset-4\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          class: \"card-body\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: `http://127.0.0.1:5000/${e.postImageLink}`,\n          style: {\n            width: \"50px\",\n            height: \"50px\"\n          },\n          className: \"ml-5 rounded-circle\",\n          alt: \"image\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 155\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156\n          },\n          __self: this\n        }, \" name: \", e.first_name, \"  \", e.last_name, \" \"), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157\n          },\n          __self: this\n        }, \" story : \", e.story_content), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158\n          },\n          __self: this\n        }, \" \", e.created), React.createElement(\"img\", {\n          className: \"w-100\",\n          style: {\n            height: \"250px\"\n          },\n          src: `http://127.0.0.1:5000/${e.postImageLink1}`,\n          alt: \"post\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          class: \"card-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          class: \"card-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        }, React.createElement(\"small\", {\n          class: \"text-muted\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        }, \"Last updated 3 mins ago\")), React.createElement(Link, {\n          to: `/Comment/${e.story_id}`,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 162\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary offset-3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 162\n          },\n          __self: this\n        }, \" Comment \"))));\n      }\n    });\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(Navbar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(Createstory, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    })), all_story, React.createElement(\"div\", {\n      className: \"offset-5 mt-3 mb-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, this.page > 1 ? React.createElement(\"li\", {\n      className: `btn btn-info`,\n      onClick: () => this.pagination(this.page - 1),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, \"Prev\")) : '', renderPageNumbers, this.page < this.state.total_pages ? React.createElement(\"li\", {\n      className: `btn btn-info`,\n      onClick: () => this.pagination(this.page + 1),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, \"Next\")) : '', this.page < this.state.total_pages + this.page ? React.createElement(\"li\", {\n      className: `btn btn-dark`,\n      onClick: () => this.pagination(this.state.total_pages),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, \"last\")) : ''), React.createElement(\"form\", {\n      onSubmit: e => this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      class: \"custom-select\",\n      id: \"inputGroupSelect01\",\n      name: \"per_page\",\n      onChange: this.handleInput,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      selected: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, \"Choose...\"), React.createElement(\"option\", {\n      value: \"5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, \"1\"), React.createElement(\"option\", {\n      value: \"10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, \"2\"), React.createElement(\"option\", {\n      value: \"15\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, \"3\")), React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn-primary mt-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, \" Submiit\")));\n  }\n\n}\n\nexport default Story;","map":{"version":3,"sources":["/home/nitu/Facebook/facebook/src/component/Story.js"],"names":["React","axios","Link","Navbar","queryString","Createstory","Story","Component","constructor","props","handleInput","e","preventDefault","setState","target","name","value","componentDidMount","page","get","state","per_page","then","res","console","log","data","allstory1","total_pages","catch","err","alert","headers","Authorization","tokenId","response","allDAta","onSubmit","post","alldata","Deleteblog","story_id","delete","user_id","history","push","window","location","reload","error","pagination","pageNo","updatePage","change_page","stringify","handlePageChange","currentPage","rowChange","localStorage","getItem","render","pageNumbers","i","renderPageNumbers","map","number","all_story","reverse","postImageLink","width","height","first_name","last_name","story_content","created","postImageLink1"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,WAAP,MAAwB,cAAxB;AACA,OAAOC,WAAP,MAAwB,eAAxB;;AAIA,MAAMC,KAAN,SAAoBN,KAAK,CAACO,SAA1B,CAAoC;AAChCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SAgBnBC,WAhBmB,GAgBLC,CAAD,IAAK;AACdA,MAAAA,CAAC,CAACC,cAAF;AACA,WAAKC,QAAL,CAAc;AACb,SAACF,CAAC,CAACG,MAAF,CAASC,IAAV,GAAgBJ,CAAC,CAACG,MAAF,CAASE;AADZ,OAAd;AAGD,KArBgB;;AAAA,SAsBnBC,iBAtBmB,GAsBC,CAACC,IAAI,GAAG,CAAR,KAAc;AAC9BjB,MAAAA,KAAK,CAACkB,GAAN,CAAW,+CAAD,GAAkD,KAAKC,KAAL,CAAWF,IAAvE,EAA4E;AAC1EG,QAAAA,QAAQ,EAAG,KAAKD,KAAL,CAAWC;AADoD,OAA5E,EAGKC,IAHL,CAGUC,GAAG,IAAI;AACXC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAhB;AACE,aAAKb,QAAL,CAAc;AACZc,UAAAA,SAAS,EAAEJ,GAAG,CAACG,IAAJ,CAASA,IADR;AAEVE,UAAAA,WAAW,EAAEL,GAAG,CAACG,IAAJ,CAASE;AAFZ,SAAd;AAIH,OATL,EAUKC,KAVL,CAUYC,GAAD,IAASC,KAAK,CAACD,GAAD,CAVzB;AAYA7B,MAAAA,KAAK,CAACkB,GAAN,CAAU,sCAAV,EAAkD;AAC9Ca,QAAAA,OAAO,EAAE;AACLC,UAAAA,aAAa,EAAE,YAAY,KAAKb,KAAL,CAAWc,OADjC;AAEL,0BAAgB;AAFX;AADqC,OAAlD,EAMKZ,IANL,CAMUa,QAAQ,IAAI;AACdX,QAAAA,OAAO,CAACC,GAAR,CAAYU,QAAQ,CAACT,IAArB;AACA,aAAKb,QAAL,CAAc;AACZuB,UAAAA,OAAO,EAAGD,QAAQ,CAACT;AADP,SAAd;AAGH,OAXL,EAb8B,CAyB1B;AACP,KAhDkB;;AAAA,SAiDnBhB,WAjDmB,GAiDJC,CAAD,IAAK;AACjB,WAAKE,QAAL,CAAe;AACb,SAACF,CAAC,CAACG,MAAF,CAASC,IAAV,GAAgBJ,CAAC,CAACG,MAAF,CAASE;AADZ,OAAf;AAGAQ,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKL,KAAjB;AACD,KAtDkB;;AAAA,SAuDnBiB,QAvDmB,GAuDP1B,CAAD,IAAO;AAChBA,MAAAA,CAAC,CAACC,cAAF;AACCX,MAAAA,KAAK,CAACqC,IAAN,CAAY,+CAAD,GAAkD,KAAKlB,KAAL,CAAWF,IAAxE,EAA6E;AAC3EG,QAAAA,QAAQ,EAAG,KAAKD,KAAL,CAAWC;AADqD,OAA7E,EAGGC,IAHH,CAGQC,GAAG,IAAI;AACXC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAhB;AACA,aAAKb,QAAL,CAAc;AACb0B,UAAAA,OAAO,EAAEhB,GAAG,CAACG,IAAJ,CAASA,IADL;AAEZE,UAAAA,WAAW,EAAEL,GAAG,CAACG,IAAJ,CAASE;AAFV,SAAd,EAFW,CAMX;AACD,OAVH,EAWGC,KAXH,CAWUC,GAAD,IAASC,KAAK,CAACD,GAAD,CAXvB;AAYD,KArEiB;;AAAA,SAsEnBU,UAtEmB,GAsELC,QAAD,IAAc;AACvBxC,MAAAA,KAAK,CAACyC,MAAN,CAAa,wCAAwCD,QAArD,EAA+D;AAC3DT,QAAAA,OAAO,EAAE;AACLW,UAAAA,OAAO,EAAE,KAAKvB,KAAL,CAAWgB,OAAX,CAAmBO;AADvB;AADkD,OAA/D,EAKKrB,IALL,CAKWC,GAAD,IAAS;AACXC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAhB;AACA,aAAKjB,KAAL,CAAWmC,OAAX,CAAmBC,IAAnB,CAAyB,UAAS,KAAKzB,KAAL,CAAWuB,OAAQ,EAArD;AACAG,QAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,KAAvB;AACH,OATL,EAUKnB,KAVL,CAUYoB,KAAD,IAAWlB,KAAK,CAACkB,KAAD,CAV3B;AAWH,KAlFkB;;AAAA,SAmFnBC,UAnFmB,GAmFLC,MAAD,IAAY;AAC3B,UAAIC,UAAU,GAAG,KAAKhC,KAAL,CAAWiC,WAA5B;AACAD,MAAAA,UAAU,CAAClC,IAAX,GAAkBiC,MAAlB;AACA,WAAKtC,QAAL,CACC;AACCwC,QAAAA,WAAW,EAAED;AADd,OADD,EAIC,MAAM;AACL,aAAK3C,KAAL,CAAWmC,OAAX,CAAmBC,IAAnB,CAAyB,IAAGzC,WAAW,CAACkD,SAAZ,CAAsBF,UAAtB,CAAkC,EAA9D;AACA,OANF;AAQA,WAAKnC,iBAAL,CAAuB,KAAKC,IAAL,GAAYiC,MAAnC;AACA,KA/FqB;;AAAA,SAiGnBI,gBAjGmB,GAiGA,CAACrC,IAAD,EAAOP,CAAP,KAAa;AAC5B,WAAKE,QAAL,CAAc;AACZ2C,QAAAA,WAAW,EAAEtC;AADD,OAAd;AAGD,KArGgB;;AAAA,SAsGjBuC,SAtGiB,GAsGJ9C,CAAD,IAAO;AACjBA,MAAAA,CAAC,CAACC,cAAF;AACA,WAAKC,QAAL,CAAc;AACV,SAACF,CAAC,CAACG,MAAF,CAASC,IAAV,GAAiBJ,CAAC,CAACG,MAAF,CAASE;AADhB,OAAd;AAGH,KA3GkB;;AAEf,SAAKI,KAAL,GAAa;AACTO,MAAAA,SAAS,EAAE,EADF;AAETS,MAAAA,OAAO,EAAE,EAFA;AAGTf,MAAAA,QAAQ,EAAC,EAHA;AAITgC,MAAAA,WAAW,EACX;AACCnC,QAAAA,IAAI,EAAE;AADP,OALS;AAQTU,MAAAA,WAAW,EAAE,CARJ;AASTM,MAAAA,OAAO,EAAEY,MAAM,CAACY,YAAP,CAAoBC,OAApB,CAA4B,OAA5B;AATA,KAAb;AAaH;;AA6FDC,EAAAA,MAAM,GAAG;AACPpC,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKL,KAAL,CAAWO,SAAvB;AACA,UAAMkC,WAAW,GAAG,EAApB;;AACE,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAI,KAAK1C,KAAL,CAAWQ,WAAhC,EAA6CkC,CAAC,EAA9C,EAAkD;AAC9CD,MAAAA,WAAW,CAAChB,IAAZ,CAAiBiB,CAAjB;AACH;;AACD,UAAMC,iBAAiB,GAAGF,WAAW,CAACG,GAAZ,CAAgBC,MAAM,IAAI;AAChD,aACI;AAAQ,QAAA,SAAS,EAAC,mBAAlB;AAAsC,QAAA,OAAO,EAAE,MAAM,KAAKf,UAAL,CAAgBe,MAAhB,CAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA+EA,MAA/E,CADJ;AAGH,KAJyB,CAA1B;AAKA,QAAIC,SAAS,GAAG,KAAK9C,KAAL,CAAWO,SAAX,CAAqBwC,OAArB,GAA+BH,GAA/B,CAAoCrD,CAAD,IAAO;AACtD,UAAI,KAAKS,KAAL,CAAWgB,OAAX,CAAmBO,OAAnB,KAA+BhC,CAAC,CAACgC,OAArC,EAA8C;AAC1C,eACE;AAAK,UAAA,KAAK,EAAC,yBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACA;AAAK,UAAA,KAAK,EAAC,WAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACA;AAAK,UAAA,GAAG,EAAG,yBAAwBhC,CAAC,CAACyD,aAAc,EAAnD;AAAsD,UAAA,KAAK,EAAE;AAAEC,YAAAA,KAAK,EAAE,MAAT;AAAiBC,YAAAA,MAAM,EAAE;AAAzB,WAA7D;AAAgG,UAAA,SAAS,EAAC,qBAA1G;AAAgI,UAAA,GAAG,EAAG,OAAtI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADA,EAEC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAa3D,CAAC,CAAC4D,UAAf,OAA4B5D,CAAC,CAAC6D,SAA9B,MAFD,EAGC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAc7D,CAAC,CAAC8D,aAAhB,CAHD,EAIC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAK9D,CAAC,CAAC+D,OAAP,CAJD,EAKC;AAAM,UAAA,SAAS,EAAE,OAAjB;AAAyB,UAAA,KAAK,EAAE;AAAEJ,YAAAA,MAAM,EAAE;AAAV,WAAhC;AAAqD,UAAA,GAAG,EAAG,yBAAwB3D,CAAC,CAACgE,cAAe,EAApG;AAAuG,UAAA,GAAG,EAAG,MAA7G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UALD,EAME;AAAG,UAAA,KAAK,EAAC,WAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UANF,EAOE;AAAG,UAAA,KAAK,EAAC,WAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAqB;AAAO,UAAA,KAAK,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAArB,CAPF,EAQE,oBAAC,IAAD;AAAM,UAAA,EAAE,EAAG,gBAAehE,CAAC,CAAC8B,QAAS,EAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAwC;AAAQ,UAAA,IAAI,EAAC,QAAb;AAAsB,UAAA,SAAS,EAAC,iBAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAxC,CARF,EASE;AAAQ,UAAA,IAAI,EAAC,QAAb;AAAsB,UAAA,SAAS,EAAC,qBAAhC;AAAsD,UAAA,OAAO,EAAE,MAAM,KAAKD,UAAL,CAAgB7B,CAAC,CAAC8B,QAAlB,CAArE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BATF,CADA,CADF;AAkBH,OAnBD,MAoBK;AACD,eACE;AAAK,UAAA,KAAK,EAAC,yBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACA;AAAK,UAAA,KAAK,EAAC,WAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACA;AAAK,UAAA,GAAG,EAAG,yBAAwB9B,CAAC,CAACyD,aAAc,EAAnD;AAAsD,UAAA,KAAK,EAAE;AAAEC,YAAAA,KAAK,EAAE,MAAT;AAAiBC,YAAAA,MAAM,EAAE;AAAzB,WAA7D;AAAgG,UAAA,SAAS,EAAC,qBAA1G;AAAgI,UAAA,GAAG,EAAG,OAAtI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADA,EAEC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAY3D,CAAC,CAAC4D,UAAd,QAA4B5D,CAAC,CAAC6D,SAA9B,MAFD,EAGC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAc7D,CAAC,CAAC8D,aAAhB,CAHD,EAIC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAK9D,CAAC,CAAC+D,OAAP,CAJD,EAKC;AAAM,UAAA,SAAS,EAAE,OAAjB;AAAyB,UAAA,KAAK,EAAE;AAAEJ,YAAAA,MAAM,EAAE;AAAV,WAAhC;AAAqD,UAAA,GAAG,EAAG,yBAAwB3D,CAAC,CAACgE,cAAe,EAApG;AAAuG,UAAA,GAAG,EAAG,MAA7G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UALD,EAME;AAAG,UAAA,KAAK,EAAC,WAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UANF,EAOE;AAAG,UAAA,KAAK,EAAC,WAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAqB;AAAO,UAAA,KAAK,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAArB,CAPF,EAQE,oBAAC,IAAD;AAAM,UAAA,EAAE,EAAG,YAAWhE,CAAC,CAAC8B,QAAS,EAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAoC;AAAQ,UAAA,IAAI,EAAC,QAAb;AAAsB,UAAA,SAAS,EAAC,0BAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAApC,CARF,CADA,CADF;AAkBH;AACJ,KAzCe,CAAhB;AA0CA,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEI;AAAK,MAAA,SAAS,EAAG,MAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,CAFJ,EAKKyB,SALL,EAMI;AAAK,MAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC,KAAKhD,IAAL,GAAY,CAAZ,GAAgB;AAAI,MAAA,SAAS,EAAG,cAAhB;AAA+B,MAAA,OAAO,EAAE,MAAI,KAAKgC,UAAL,CAAgB,KAAKhC,IAAL,GAAU,CAA1B,CAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA0E;AAAG,MAAA,IAAI,EAAC,GAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAA1E,CAAhB,GAAoH,EADrH,EAEK6C,iBAFL,EAGC,KAAK7C,IAAL,GAAY,KAAKE,KAAL,CAAWQ,WAAvB,GAAqC;AAAI,MAAA,SAAS,EAAG,cAAhB;AAA+B,MAAA,OAAO,EAAE,MAAI,KAAKsB,UAAL,CAAgB,KAAKhC,IAAL,GAAU,CAA1B,CAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA0E;AAAG,MAAA,IAAI,EAAC,GAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAA1E,CAArC,GAAyI,EAH1I,EAIC,KAAKA,IAAL,GAAY,KAAKE,KAAL,CAAWQ,WAAX,GAAuB,KAAKV,IAAxC,GAA+C;AAAI,MAAA,SAAS,EAAG,cAAhB;AAA+B,MAAA,OAAO,EAAE,MAAI,KAAKgC,UAAL,CAAgB,KAAK9B,KAAL,CAAWQ,WAA3B,CAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAqF;AAAG,MAAA,IAAI,EAAC,GAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAArF,CAA/C,GAA8J,EAJ/J,CANJ,EAaI;AAAM,MAAA,QAAQ,EAAKjB,CAAD,IAAO,KAAK0B,QAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACF;AAAQ,MAAA,KAAK,EAAC,eAAd;AAA8B,MAAA,EAAE,EAAC,oBAAjC;AAAsD,MAAA,IAAI,EAAC,UAA3D;AAAsE,MAAA,QAAQ,EAAG,KAAK3B,WAAtF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAQ,MAAA,QAAQ,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,EAEE;AAAQ,MAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAFF,EAGE;AAAQ,MAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAHF,EAIE;AAAQ,MAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAJF,CADE,EAOF;AAAQ,MAAA,IAAI,EAAG,QAAf;AAAwB,MAAA,SAAS,EAAG,kBAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAPE,CAbJ,CADJ;AA0BH;;AA5L+B;;AAgMpC,eAAeJ,KAAf","sourcesContent":["import React from \"react\"\nimport axios from \"axios\";\nimport { Link } from 'react-router-dom';\nimport Navbar from './Navbar';\nimport queryString from \"query-string\";\nimport Createstory from './Createstory';\n\n\n\nclass Story extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            allstory1: [],\n            allDAta :[],\n            per_page:'',\n            change_page: \n            {\n\t\t\t          page: 1\n\t            },\n            total_pages: 0,\n            tokenId: window.localStorage.getItem(\"token\"),\n          \n        }\n\n    }\n    handleInput =(e)=>{\n        e.preventDefault()\n        this.setState({\n         [e.target.name]:e.target.value\n        })\n      }\n    componentDidMount = (page = 1) => {\n        axios.get(`http://127.0.0.1:5000/read_userStoryall?page=` + this.state.page,{\n          per_page : this.state.per_page\n        })\n            .then(res => {\n              console.log(res.data)\n                this.setState({\n                  allstory1: res.data.data,\n                    total_pages: res.data.total_pages\n                })\n            })\n            .catch((err) => alert(err))\n\n        axios.get(\"http://127.0.0.1:5000/get-user-token\", {\n            headers: {\n                Authorization: \"Bearer \" + this.state.tokenId,\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(response => {\n                console.log(response.data)\n                this.setState({\n                  allDAta : response.data\n                })\n            })\n            // .catch((err) => alert(err))\n    }\n    handleInput = (e)=>{\n      this.setState ({\n        [e.target.name]:e.target.value\n      })\n      console.log(this.state)\n    }\n    onSubmit = (e) => {\n      e.preventDefault()\n       axios.post(`http://127.0.0.1:5000/read_userStoryall?page=` + this.state.page,{\n         per_page : this.state.per_page\n       })\n         .then(res => {\n           console.log(res.data)\n           this.setState({\n            alldata: res.data.data,\n             total_pages: res.data.total_pages\n           })\n           // console.log(this.state.allvalue)\n         })\n         .catch((err) => alert(err))\n     }\n    Deleteblog = (story_id) => {\n        axios.delete('http://127.0.0.1:5000/delete-story/' + story_id, {\n            headers: {\n                user_id: this.state.allDAta.user_id\n            }\n        })\n            .then((res) => {\n                console.log(res.data)\n                this.props.history.push(`/Story/${this.state.user_id}`)\n                window.location.reload(false)\n            })\n            .catch((error) => alert(error))\n    }\n    pagination = (pageNo) => {\n\t\tlet updatePage = this.state.change_page\n\t\tupdatePage.page = pageNo\n\t\tthis.setState(\n\t\t\t{\n\t\t\t\tchange_page: updatePage\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tthis.props.history.push(`?${queryString.stringify(updatePage)}`);\n\t\t\t}\n        );\n\t\tthis.componentDidMount(this.page = pageNo);\n\t};\n\n    handlePageChange = (page, e) => {\n        this.setState({\n          currentPage: page\n        });\n      };\n      rowChange = (e) => {\n        e.preventDefault()\n        this.setState({\n            [e.target.name]: e.target.value\n        })\n    }\n    render() {\n      console.log(this.state.allstory1)\n      const pageNumbers = [];\n        for (let i = 1; i <= this.state.total_pages; i++) {\n            pageNumbers.push(i);\n        }\n        const renderPageNumbers = pageNumbers.map(number => {\n            return (\n                <button className=\"btn btn-dark ml-2\" onClick={() => this.pagination(number)}>{number}</button>\n            );\n        });\n        let all_story = this.state.allstory1.reverse().map((e) => {\n            if (this.state.allDAta.user_id === e.user_id) {\n                return ( \n                  <div class=\"card mb-3 w-50 offset-3\">\n                  <div class=\"card-body\">\n                  <img src={`http://127.0.0.1:5000/${e.postImageLink}`} style={{ width: \"50px\", height: \"50px\" }} className=\"ml-5 rounded-circle\" alt = \"image\"></img>\n                   <p > name : {e.first_name} {e.last_name} </p>\n                   <p > story : {e.story_content}</p>\n                   <p> {e.created}</p>\n                   <img  className =\"w-100\" style={{ height: \"250px\" }} src={`http://127.0.0.1:5000/${e.postImageLink1}`} alt = \"post\"></img>\n                    <p class=\"card-text\"></p>\n                    <p class=\"card-text\"><small class=\"text-muted\">Last updated 3 mins ago</small></p>\n                    <Link to={`/Updatestory/${e.story_id}`}><button type=\"submit\" className=\"btn btn-primary\">Update story </button></Link>\n                    <button type=\"submit\" className=\"btn btn-danger ml-1\" onClick={() => this.Deleteblog(e.story_id)}> Delete story </button>\n                    </div>\n                 \n                  \n                </div>\n                    \n                )\n            }\n            else {\n                return (\n                  <div class=\"card mb-3 w-50 offset-4\">\n                  <div class=\"card-body\">\n                  <img src={`http://127.0.0.1:5000/${e.postImageLink}`} style={{ width: \"50px\", height: \"50px\" }} className=\"ml-5 rounded-circle\" alt = \"image\"></img>\n                   <p > name: {e.first_name}  {e.last_name} </p>\n                   <p > story : {e.story_content}</p>\n                   <p> {e.created}</p>\n                   <img  className =\"w-100\" style={{ height: \"250px\" }} src={`http://127.0.0.1:5000/${e.postImageLink1}`} alt = \"post\"></img>\n                    <p class=\"card-text\"></p>\n                    <p class=\"card-text\"><small class=\"text-muted\">Last updated 3 mins ago</small></p>\n                    <Link to={`/Comment/${e.story_id}`}><button type=\"submit\" className=\"btn btn-primary offset-3\"> Comment </button></Link>\n\n                    </div>\n                 \n                  \n                </div>\n                )\n\n            }\n        })\n        return (\n            <div>\n              <Navbar />\n                <div className = \"mb-3\">\n                <Createstory />\n                </div>\n                {all_story}\n                <div className=\"offset-5 mt-3 mb-5\">\n                {this.page > 1 ? <li className={`btn btn-info`} onClick={()=>this.pagination(this.page-1)}><a href=\"#\">Prev</a></li>:''}\n                    {renderPageNumbers}\n                {this.page < this.state.total_pages ? <li className={`btn btn-info`} onClick={()=>this.pagination(this.page+1)}><a href=\"#\">Next</a></li>:''}\n                {this.page < this.state.total_pages+this.page ? <li className={`btn btn-dark`} onClick={()=>this.pagination(this.state.total_pages)}><a href=\"#\">last</a></li>:''}\n                    \n                </div>\n                <form onSubmit = {(e) => this.onSubmit}>\n              <select class=\"custom-select\" id=\"inputGroupSelect01\" name=\"per_page\" onChange ={this.handleInput}>\n                <option selected>Choose...</option>\n                <option value=\"5\">1</option>\n                <option value=\"10\">2</option>\n                <option value=\"15\">3</option>\n              </select>\n              <button type = \"submit\" className = \"btn-primary mt-5\"> Submiit</button>\n              </form>\n                \n            </div>\n        )\n    }\n\n}\n\nexport default Story\n"]},"metadata":{},"sourceType":"module"}