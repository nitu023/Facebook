{"ast":null,"code":"var _jsxFileName = \"/home/nitu/Facebook/facebook/src/component/Story.js\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport { Link } from 'react-router-dom';\nimport Navbar from './Navbar';\nimport queryString from \"query-string\";\n\nclass Story extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = (page = 1) => {\n      axios.get(`http://127.0.0.1:5000/read_blog?page=${page}`).then(res => {\n        this.setState({\n          allstory: res.data.data,\n          total_pages: res.data.total_pages\n        }); // console.log(res.data[0].comment)\n        // alert(\"helllo\")\n      }).catch(err => alert(err));\n      axios.get(\"http://127.0.0.1:5000/get-user-token\", {\n        headers: {\n          Authorization: \"Bearer \" + this.state.tokenId,\n          'Content-Type': 'application/json'\n        }\n      }).then(response => {\n        console.log(response.data);\n        this.setState({\n          allDAta: response.data\n        });\n      }).catch(err => alert(err));\n    };\n\n    this.pagination = pageNo => {\n      let updatePage = this.state.change_page;\n      updatePage.page = pageNo;\n      this.setState({\n        change_page: updatePage\n      }, () => {\n        this.props.history.push(`?${queryString.stringify(updatePage)}`);\n      });\n      this.componentDidMount(this.page = pageNo);\n    };\n\n    this.state = {\n      allstory: [],\n      allDAta: [],\n      Comments_all: [],\n      per_page: 0,\n      change_page: {\n        page: 1\n      },\n      total_page: 0,\n      tokenId: window.localStorage.getItem(\"token\")\n    };\n  }\n\n  render() {\n    const pageNumbers = [];\n\n    for (let i = 1; i <= this.state.total_pages; i++) {\n      pageNumbers.push(i);\n    }\n\n    const renderPageNumbers = pageNumbers.map(number => {\n      return React.createElement(\"button\", {\n        className: \"btn btn-secondary ml-2\",\n        onClick: () => this.pagination(number),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, number);\n    });\n    let all_blog = this.state.allstory.reverse().map(e => {\n      if (Number(this.state.user_id) === Number(e.user_id)) {\n        return React.createElement(\"div\", {\n          className: \"card w-50 mb-4 offset-3 text-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          class: \"w-200\",\n          style: {\n            height: \"200px\"\n          },\n          src: `http://127.0.0.1:5000/${e.postImageLink1}`,\n          alt: \"post\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }), React.createElement(\"h4\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }, \" content : \", e.story_content), React.createElement(\"h4\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        }, \"user_id:\", this.state.allDAta.first_name, \" \"), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        }, React.createElement(Link, {\n          to: `/Comment/${e.story_id}`,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-info\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }, \" Show More \")), React.createElement(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-danger ml-5\",\n          onClick: () => this.Deleteblog(e.blog_id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        }, \" Delete Blog \"), React.createElement(Link, {\n          to: `/Updatestory/${e.blog_id}`,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary ml-5\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }, \"Update Blog \"))));\n      } else {\n        return React.createElement(\"div\", {\n          className: \"card w-50 mb-4 offset-3 text-center \",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          class: \"w-100\",\n          style: {\n            height: \"300px\"\n          },\n          src: `http://127.0.0.1:5000/${e.postImageLink1}`,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }), React.createElement(\"h4\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        }, \" content : \", e.story_content), React.createElement(\"h4\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112\n          },\n          __self: this\n        }, \"user_id:\", this.state.allDAta.first_name, \" \"), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }, React.createElement(Link, {\n          to: `/Comment/${e.story_id}`,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-info\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }, \" Show More \"))));\n      }\n    });\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(Navbar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }), React.createElement(\"h2\", {\n      className: \"offset-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \"Blog Page\"), all_blog, React.createElement(\"div\", {\n      className: \"offset-5 mt-3 mb-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, renderPageNumbers));\n  }\n\n}\n\nexport default Story;","map":{"version":3,"sources":["/home/nitu/Facebook/facebook/src/component/Story.js"],"names":["React","axios","Link","Navbar","queryString","Story","Component","constructor","props","componentDidMount","page","get","then","res","setState","allstory","data","total_pages","catch","err","alert","headers","Authorization","state","tokenId","response","console","log","allDAta","pagination","pageNo","updatePage","change_page","history","push","stringify","Comments_all","per_page","total_page","window","localStorage","getItem","render","pageNumbers","i","renderPageNumbers","map","number","all_blog","reverse","e","Number","user_id","height","postImageLink1","story_content","first_name","story_id","Deleteblog","blog_id"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport axios from \"axios\";\nimport { Link } from 'react-router-dom';\nimport Navbar from './Navbar';\nimport queryString from \"query-string\";\n\n\nclass Story extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            allstory: [],\n            allDAta :[],\n            Comments_all: [],\n            per_page: 0,\n            change_page: \n            {\n\t\t\t page: 1\n\t            },\n            total_page: 0,\n            tokenId: window.localStorage.getItem(\"token\")\n\n        }\n\n    }\n    componentDidMount = (page = 1) => {\n        axios.get(`http://127.0.0.1:5000/read_blog?page=${page}`)\n            .then(res => {\n                this.setState({\n                  allstory: res.data.data,\n                    total_pages: res.data.total_pages\n                })\n                // console.log(res.data[0].comment)\n                // alert(\"helllo\")\n            })\n            .catch((err) => alert(err))\n\n        axios.get(\"http://127.0.0.1:5000/get-user-token\", {\n            headers: {\n                Authorization: \"Bearer \" + this.state.tokenId,\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(response => {\n                console.log(response.data)\n                this.setState({\n                  allDAta : response.data\n                })\n            })\n            .catch((err) => alert(err))\n    }\n    // Deleteblog = (blog_id) => {\n    //     axios.delete('http://127.0.0.1:5000/delete-blog/' + blog_id, {\n    //         headers: {\n    //             user_id: this.state.user_id\n    //         }\n    //     })\n    //         .then((res) => {\n    //             console.log(res.data)\n    //             this.props.history.push(`/Blog/${this.state.user_id}`)\n    //             window.location.reload(false)\n    //         })\n    //         .catch((error) => alert(error))\n    // }\n    pagination = (pageNo) => {\n\t\tlet updatePage = this.state.change_page\n\t\tupdatePage.page = pageNo\n\t\tthis.setState(\n\t\t\t{\n\t\t\t\tchange_page: updatePage\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tthis.props.history.push(`?${queryString.stringify(updatePage)}`);\n\t\t\t}\n        );\n\t\tthis.componentDidMount(this.page = pageNo);\n\t};\n\n    render() {\n        const pageNumbers = [];\n        for (let i = 1; i <= this.state.total_pages; i++) {\n            pageNumbers.push(i);\n        }\n        const renderPageNumbers = pageNumbers.map(number => {\n            return (\n                <button className=\"btn btn-secondary ml-2\" onClick={() => this.pagination(number)}>{number}</button>\n            );\n        });\n        let all_blog = this.state.allstory.reverse().map((e) => {\n            if (Number(this.state.user_id) === Number(e.user_id)) {\n                return (\n                    <div className=\"card w-50 mb-4 offset-3 text-center\" >\n\n                        <img class=\"w-200\" style={{ height: \"200px\" }} src={`http://127.0.0.1:5000/${e.postImageLink1}`} alt = \"post\"></img>\n                        <h4> content : {e.story_content}</h4>\n                        <h4>user_id:{this.state.allDAta.first_name} </h4>\n                        <div>\n                            <Link to={`/Comment/${e.story_id}`}><button type=\"submit\" className=\"btn btn-info\"> Show More </button></Link>\n                            <button type=\"submit\" className=\"btn btn-danger ml-5\" onClick={() => this.Deleteblog(e.blog_id)}> Delete Blog </button>\n                            <Link to={`/Updatestory/${e.blog_id}`}><button type=\"submit\" className=\"btn btn-primary ml-5\">Update Blog </button></Link>\n\n                        </div>\n                    </div>\n                )\n            }\n            else {\n                return (\n                    <div className=\"card w-50 mb-4 offset-3 text-center \" >\n\n                        <img class=\"w-100\" style={{ height: \"300px\" }} src={`http://127.0.0.1:5000/${e.postImageLink1}`}></img>\n                        <h4> content : {e.story_content}</h4>\n                        <h4>user_id:{this.state.allDAta.first_name} </h4>\n                        <div>\n                            <Link to={`/Comment/${e.story_id}`}><button type=\"submit\" className=\"btn btn-info\"> Show More </button></Link>\n                        </div>\n                    </div>\n                )\n\n            }\n        })\n        return (\n            <div>\n                <Navbar />\n                <h2 className=\"offset-5\">Blog Page</h2>\n                {all_blog}\n                <div className=\"offset-5 mt-3 mb-5\">\n                    {renderPageNumbers}\n                </div>\n            </div>\n        )\n    }\n\n}\n\nexport default Story\n"]},"metadata":{},"sourceType":"module"}